<!DOCTYPE html>
<html>
<head>
    <title>My Profile</title>
    <style>
        body { background: #121212; color: white; font-family: Arial; padding: 20px; }
        .card { background: #1e1e1e; padding: 20px; margin: 10px; border-radius: 10px; }
        button { background: #4CAF50; color: white; border: none; padding: 10px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <a href="index.html">â† Back</a>
    <h1>ğŸ‘¤ My Profile</h1>
    
    <div class="card">
        <h3>ğŸ’° Balance: <span id="balance">$1000</span></h3>
        <button onclick="addMoney(100)">+$100</button>
        <button onclick="addMoney(500)">+$500</button>
    </div>
    
    <div class="card">
        <h3>ğŸ’ My Items</h3>
        <div id="items">Loading...</div>
        <button onclick="addItem('Metal', 10)">Add 10 Metal</button>
        <button onclick="addItem('Wood', 20)">Add 20 Wood</button>
    </div>
    
    <div class="card">
        <h3>ğŸ“œ Game History</h3>
        <div id="history">No games yet</div>
    </div>
    
    <button onclick="logout()" style="background: red;">Logout</button>

    <script>
        // Get current user
        const username = localStorage.getItem('currentUser');
        if (!username) window.location.href = 'login.html';
        
        // Load user data
        const users = JSON.parse(localStorage.getItem('tws_users')) || {};
        const userData = users[username] || { balance: 1000, items: [] };
        
        // Update display
        document.getElementById('balance').textContent = '$' + userData.balance;
        document.getElementById('items').innerHTML = userData.items.map(item => 
            `<div>${item.name}: ${item.quantity}</div>`
        ).join('') || 'No items';
        
        // Load game history
        const history = JSON.parse(localStorage.getItem('game_history')) || [];
        const myGames = history.filter(g => g.player1 === username || g.player2 === username);
        document.getElementById('history').innerHTML = myGames.map(game => 
            `<div>${game.date}: ${game.game} vs ${game.player2} - ${game.result}</div>`
        ).join('') || 'No games yet';
        
        // Functions
        function addMoney(amount) {
            userData.balance += amount;
            users[username] = userData;
            localStorage.setItem('tws_users', JSON.stringify(users));
            document.getElementById('balance').textContent = '$' + userData.balance;
        }
        
        function addItem(name, quantity) {
            if (!userData.items) userData.items = [];
            const item = userData.items.find(i => i.name === name);
            if (item) {
                item.quantity += quantity;
            } else {
                userData.items.push({ name, quantity });
            }
            users[username] = userData;
            localStorage.setItem('tws_users', JSON.stringify(users));
            document.getElementById('items').innerHTML = userData.items.map(item => 
                `<div>${item.name}: ${item.quantity}</div>`
            ).join('');
        }
        
        function logout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }
    </script>
</body>
</html>
